<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/solarized.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/zenburn.css">

</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <h1 class="presentation-title">Eugene</h1>
            <h5>Система за съхранение, извличане и обработка на големи графовобазирани данни</h5>
            <br/>
            <i><p>Дипломант: Стоян Тинчев</p></i>
            <i><p>Ръководител: Любомир Стоянов</p></i>
        </section>

        <section>
            <h3>Изисквания</h3>
            <ul>
                <li>Алгоритъм за компресиране/декомпресиране на данните</li>
                <ul>
                    <li>Имплементация на фрагментно декомпресиране</li>
                </ul>
                <li>Изграждане на метод за комуникация между изчислителните стълбове</li>
                <li>Метод за наредена обработка на изчисленията</li>
                <ul>
                    <li>Клиент/Сървър модел</li>
                </ul>
                <li>Метод за изпълнение на заявки</li>
                <li>Имплементация на конкурентност и синхронизация между
                    изчислителните стълбове
                </li>
            </ul>
        </section>

        <section>
            <h3>Характеристики на една СУБД</h3>
            <ul>
                <li>Положителни страни</li>
                <li>Отрицателни страни</li>
            </ul>
        </section>

        <section>
            <h3>Проектиране на система за управление от бази данни</h3>
            <ul>
                <li>Изисквания</li>
                <li>Подбор на технологии</li>
                <li>Архитектура</li>
            </ul>
        </section>

        <section>
            <h3>Разработка на система за управление на бази данни</h3>
            <ul>
                <li>Заявки</li>
                <li>Компресия</li>
                <li>Декомпресия</li>
                <ul>
                    <li>Частична декомпресия</li>
                </ul>
            </ul>
        </section>

        <section>
            <section>
                <h3>Компресионен модул</h3>
                <img src="https://i.ibb.co/Npyk0Xg/image.png" alt="arch-pager">
                <ul>
                    <li>Бързодействие 1GB файл за около 105 секунди</li>
                </ul>
            </section>
            <section>
                <img src="https://i.ibb.co/0cf8JDS/image.png" alt="arch-pager">
            </section>
            <section>
                <img src="https://i.ibb.co/7y5qfvc/image.png" alt="arch-pager" width="40%" height="80%">
            </section>
            <section>
                <img src="https://i.ibb.co/vqVg5Wn/image.png" alt="arch-pager" width="40%" height="80%">
            </section>
            <section>
                <img src="https://i.ibb.co/R0Ps6rN/image.png" alt="arch-pager" width="40%" height="80%">
            </section>
        </section>

        <section>
            <section>
                <h3>Декомпресионен модул</h3>
                <img src="https://i.ibb.co/D46Pbc8/image.png" alt="btree">
                <ul>
                    <li>Частично декомпресиране</li>
                    <li>Бързодействие 1GB файл за около 70 секунди</li>
                </ul>
            </section>
            <section>
                <img src="https://i.ibb.co/wy95W1w/image.png" alt="arch-pager" width="40%" height="80%">
            </section>
        </section>

        <section>
            <h3>Клиент-сървър модул</h3>
            <ul>
                <li>Може да се използва самостоятелно, като не е необходимо структурата за съхранение да е B-дърво</li>
                <li>Релизацията е изцяло абстрактна и могат да се съхраняват всякакви типове, дори такива, които
                    са дефиниране от потребителя
                </li>
            </ul>
        </section>

        <section>
            <section>
                <h3>Коректност на реализацията</h3>
                <img src="https://i.ibb.co/MDy9H4c/image.png" alt="gh-ci" width="90%" height="40%">
                <img src="https://i.ibb.co/7j5L2MM/image.png" alt="gh-ci" width="90%" height="40%">
            </section>
            <section>
                <pre><code data-trim data-noescape>
#include <core/storage/compression/tests/Shared.h>

/// \brief In this test - in the file is written 1KB
TEST_CASE("Compressor specific_file_size_test", "[specific_file_size_test]") {
	const int file_size = 1*1024; //!< 1KB
	const std::string &file_name = "test.txt";
	const std::string &compressed_file_name = "compressed";

	const std::string text_in_file = generate_random_string_sequence(file_size);

	std::ofstream ofs(file_name);
	for (int j = 0; j < file_size; ++j)
		ofs << text_in_file;
	ofs.close();

	REQUIRE(exists(file_name));

	compression::Compressor compress{
		std::vector<std::string>(1, file_name),
		compressed_file_name
	};
	compress();
	REQUIRE(exists(compressed_file_name));

	check_initial_compressed_size(file_name, compressed_file_name);
	REQUIRE(clean({{"file_name", file_name},
	               {"compressed_file_name", compressed_file_name}}));
}
						</code></pre>
            </section>
            <section>
                <pre><code data-trim data-noescape>
#include <core/storage/compression/benchmarks/Shared.h>

/// @brief Compression benchmark
///
/// \param st - google benchmark state object that contains the
/// benchmark parameters
static void BM_Compression(benchmark::State &st) {
	for (auto _ : st) {
		st.PauseTiming();
		std::ofstream ofs(file_name.begin());

		ofs << generate_random_string_sequence(st.range(0));

		ofs.close();
		st.ResumeTiming();

		compression::Compressor{
		        std::vector<std::string>(1, file_name.begin()),
		        compressed_file_name}();

		st.PauseTiming();
		clean({file_name.begin(), compressed_file_name.begin()});
		st.ResumeTiming();
	}
}

//	1*1024*1024*1024 for 1GB ".txt" file -> ~105 seconds
//  1*1024*1024 for 1MB ".txt" file -> ~110ms
//  64 for 1KB ".txt" file
BENCHMARK(BM_Compression)
        ->Unit(benchmark::kMillisecond)
        ->Iterations(10)
        ->Arg(1*1024*1024);

BENCHMARK_MAIN();
						</code></pre>
            </section>
        </section>


        <section>
            <section>
                <h3>Демонстрация</h3>
                <img src="https://cdn-icons-png.flaticon.com/512/550/550486.png" width="250px"/>
            </section>
        </section>

        <section>
            <h3>Постижения на дипломната работа</h3>
            <ul>
                <li>Направено подробно проучване за реализация на поставените задачи.</li>
                <li>Изградена система за съхранение, извличане и обработка на големи графовобазирани данни.</li>
                <li>Подсистемата, която се грижи за компресирането/декомпресирането на информацията,
                    специалното частично декомпресиране и реализацията на клиент-сървър модел,
                    където да могат да се изпълняват заявки.
                </li>
                <!--                <li>Реализирана е примерна база данни, използвайки СУБД.</li>-->
            </ul>
        </section>

        <section>
            <h3>Бъдеща реализация</h3>
            <ul>
                <li>Ускорена компресия (използване на нишки)</li>
                <li>Оптимизирана компресия (използване на mmap)</li>
            </ul>
        </section>

        <section>
            <h3>Благодаря за вниманието!</h3>
        </section>

        <section>
            <section>
                <h3>Обработка на грешки</h3>
                <ul>
                    <li>Използван е Logger за проследяване на проблемите</li>
                    <li>Клиент сървър модела има status response codes за специфични грешки</li>
                    <li>Пример</li>
                </ul>
            </section>

            <section>
						<pre><code data-trim data-noescape>
template<typename Key, typename Value>
void Handler<Key, Value>::handle_request(std::string_view endpoint,
                                         const http_request &request, FuncHandleRequest &action) {
	auto path = request.relative_uri().path();
	CHECK_ENDPOINT(path, endpoint) {
		auto answer = json::value::object();
		request
		        .extract_json()
		        .then([&answer, &action, &request](const pplx::task<json::value> &task) {
			        try {
				        auto const &jvalue = task.get();

				        if (!jvalue.is_null()) {
					        action(jvalue, answer);
				        }
			        } catch (http_exception const &e) {
				        ucout << e.what() << std::endl;
				        Logger::the().log(spdlog::level::info,
				                          R"(Backend failure of "{0}" with exception "{1}")",
				                          request.relative_uri().path(), e.what());
				        request.reply(status_codes::InternalError,
				                      json::value::string(e.what()));
				        return;
			        }
		        })
		        .wait();

		request.reply(status_codes::OK, answer);
		return;
	}
	try {
		m_credentials_decoder->decode(request.headers());
		if (!m_credentials_decoder->is_valid(request.headers())) {
			Logger::the().log(spdlog::level::err,
			                  R"(Backend failure of "{0}", user unauthorized)",
			                  request.relative_uri().path());
			request.reply(status_codes::Unauthorized);
			return;
		}
	} catch (std::exception &e) {
		Logger::the().log(spdlog::level::err,
		                  R"(Backend failure of "{0}", user unauthorized)",
		                  request.relative_uri().path());
		request.reply(status_codes::Unauthorized);
		return;
	}
	request.reply(status_codes::NotFound);
}
						</code></pre>
            </section>
        </section>

        <section>
            <h3>BASE64 кодиране</h3>
        </section>

        <section>
            <h3>Криптография, сигурност клиент-сървър на транспортно ниво</h3>
        </section>

        <section>
            <h3>Автентикация - пренос на потребителско име и парола</h3>
        </section>

        <section>
            <h3>ASCII кодиране</h3>
        </section>

        <section>
            <p>Въпроси?</p>
            <img src="https://cdn-icons-png.flaticon.com/512/942/942751.png" width="128px"/>
        </section>

        <section>
            <h3>Благодаря за вниманието!</h3>
        </section>

    </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,
        slideNumber: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
    });
</script>
</body>
</html>
